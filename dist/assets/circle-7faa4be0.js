import{j as e,U as L,T as j,P as o,r as p,S as C,I as z,w as g,x as E,M as S,z as W,$ as D,a1 as H,A as U,y as Y,W as B}from"./index-b035a519.js";import{u as G}from"./circleslide-e6fc1069.js";import{L as Q,u as V}from"./label-27495d72.js";import{T as f,a as h,b as $,c as J,d as K,e as X,f as Z,g as _}from"./TableSortLabel-295a202c.js";import{C as ee}from"./Container-217ed1e2.js";import{C as te}from"./Card-fa1dfd48.js";const ne=()=>{var a,r;const{data:t}=G(),n=((a=t==null?void 0:t.data)==null?void 0:a.totalCircles)||0,s=((r=t==null?void 0:t.data)==null?void 0:r.circles)||[];return{totalCircles:n,circles:s}};function P({query:t}){return e.jsx(f,{children:e.jsx(h,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(L,{sx:{textAlign:"center"},children:[e.jsx(j,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(j,{variant:"body2",children:["No results found for Â ",e.jsxs("strong",{children:['"',t,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}P.propTypes={query:o.string};function R({name:t,member:n,city:s,number:a,status:r,created:d}){const[l,i]=p.useState(null),u=b=>{i(b.currentTarget)},m=()=>{i(null)};return e.jsxs(e.Fragment,{children:[e.jsxs(f,{hover:!0,tabIndex:-1,children:[e.jsx(h,{component:"th",scope:"row",padding:"none",children:e.jsx(C,{direction:"row",alignItems:"center",children:e.jsx(j,{sx:{px:2},noWrap:!0,children:t})})}),e.jsx(h,{children:n}),e.jsx(h,{children:a||"Ikeja"}),e.jsx(h,{children:e.jsxs(Q,{color:r==="banned"?"error":"success",children:[r,"success"]})}),e.jsx(h,{children:d}),e.jsx(h,{align:"right",children:e.jsx(z,{onClick:u,children:e.jsx(g,{icon:"eva:more-vertical-fill"})})})]}),e.jsxs(E,{open:!!l,anchorEl:l,onClose:m,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:[e.jsxs(S,{onClick:m,children:[e.jsx(g,{icon:"eva:edit-fill",sx:{mr:2}}),"Edit"]}),e.jsxs(S,{onClick:m,sx:{color:"error.main"},children:[e.jsx(g,{icon:"eva:trash-2-outline",sx:{mr:2}}),"Delete"]})]})]})}R.propTypes={name:o.string.isRequired,member:o.any.isRequired,city:o.string.isRequired,number:o.string.isRequired,status:o.string.isRequired,created:o.string.isRequired};const se={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function re(t,n,s){return t?Math.max(0,(1+t)*n-s):0}function T(t,n,s){return t[s]===null?1:n[s]===null||n[s]<t[s]?-1:n[s]>t[s]?1:0}function ie(t,n){return t==="desc"?(s,a)=>T(s,a,n):(s,a)=>-T(s,a,n)}function ae({inputData:t,comparator:n,filterName:s}){const a=t.map((r,d)=>[r,d]);return a.sort((r,d)=>{const l=n(r[0],d[0]);return l!==0?l:r[1]-d[1]}),t=a.map(r=>r[0]),s&&(t=t.filter(r=>r.name.toLowerCase().indexOf(s.toLowerCase())!==-1)),t}function I({order:t,orderBy:n,rowCount:s,headLabel:a,numSelected:r,onRequestSort:d}){const l=i=>u=>{d(u,i)};return e.jsx($,{children:e.jsx(f,{children:a.map(i=>e.jsx(h,{align:i.align||"left",sortDirection:n===i.id?t:!1,sx:{width:i.width,minWidth:i.minWidth},children:e.jsxs(J,{hideSortIcon:!0,active:n===i.id,direction:n===i.id?t:"asc",onClick:l(i.id),children:[i.label,n===i.id?e.jsx(W,{sx:{...se},children:t==="desc"?"sorted descending":"sorted ascending"}):null]})},i.id))})})}I.propTypes={order:o.oneOf(["asc","desc"]),orderBy:o.string,rowCount:o.number,headLabel:o.array,numSelected:o.number,onRequestSort:o.func};function F({emptyRows:t,height:n}){return t?e.jsx(f,{sx:{...n&&{height:n*t}},children:e.jsx(h,{colSpan:9})}):null}F.propTypes={emptyRows:o.number,height:o.number};function oe(){const[t,n]=p.useState(0),[s,a]=p.useState("asc"),[r,d]=p.useState("name"),[l,i]=p.useState(""),[u,m]=p.useState(10),b=V(),{totalCircles:y,circles:q}=ne(),k=(c,x)=>{a(r===x&&s==="asc"?"desc":"asc"),d(x)},A=(c,x)=>{n(x)},N=c=>{n(0),m(parseInt(c.target.value,10))},O=c=>{n(0),i(c.target.value)},w=ae({inputData:q,comparator:ie(s,r),filterName:l}),M=!w.length&&!!l;return e.jsxs(ee,{children:[e.jsxs(C,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[e.jsxs(j,{style:{marginBottom:40},variant:"h4",children:["Safety Circles ",e.jsx("br",{})," ",e.jsx("span",{style:{color:"#292727",fontSize:"16px",fontWeight:400,lineHeight:"19.36px"},children:"Manage sfaety circles created by Yawa users."})]}),e.jsxs(C,{direction:"row",spacing:2,children:[e.jsx(D,{value:l,onChange:O,placeholder:"Search safety circle",InputProps:{startAdornment:e.jsx(H,{position:"start",children:e.jsx(g,{icon:"eva:search-fill"})}),style:{height:"42px",width:"240px"}},variant:"outlined",size:"small"}),e.jsx(U,{variant:"contained",style:{background:"#03BDE9",width:"181px",height:"40px",borderRadius:"4px"},color:"inherit",startIcon:e.jsx(g,{icon:"eva:plus-fill"}),children:"Create New Circle"})]})]}),e.jsxs(te,{children:[e.jsx(Y,{children:e.jsx(K,{sx:{overflow:"unset"},children:e.jsxs(X,{sx:{minWidth:800},style:{background:"#F2F2F2"},children:[e.jsx(I,{order:s,orderBy:r,rowCount:y,numSelected:0,onRequestSort:k,headLabel:[{id:"name",label:"Name"},{id:"No. of Members",label:"No. of Members"},{id:"city",label:"City"},{id:"state",label:"State"},{id:"Admin",label:"Admin"},{id:"Created",label:"Created"},{id:"",label:""}]}),e.jsxs(Z,{children:[w.slice(t*u,t*u+u).map((c,x)=>{const v=b(c==null?void 0:c.createdAt);return e.jsx(R,{name:c.name,member:c.members.length,city:c.city,state:c.state,status:c.status,created:v},x)}),e.jsx(F,{height:77,emptyRows:re(t,u,y)}),M&&e.jsx(P,{query:l})]})]})})}),e.jsx(_,{page:t,component:"div",count:y,rowsPerPage:u,onPageChange:A,rowsPerPageOptions:[5,10,25],onRowsPerPageChange:N})]})]})}function pe(){return e.jsxs(e.Fragment,{children:[e.jsx(B,{children:e.jsx("title",{children:" User | Yawa Dashboard "})}),e.jsx(oe,{})]})}export{pe as default};
