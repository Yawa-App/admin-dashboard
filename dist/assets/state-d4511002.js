import{j as e,U as W,T as j,P as a,r as g,S as v,I as D,w as b,x as H,M as T,z as U,ac as Q,a4 as V,ad as Y,$ as B,a1 as G,A as $,y as J,W as K}from"./index-b06e9d0b.js";import{L as X,u as Z}from"./label-65eed296.js";import{T as y,a as x,b as _,c as w,d as ee,e as ne,f as te,g as se}from"./TableSortLabel-22229587.js";import{C as ie}from"./Container-05bda64c.js";import{C as re}from"./Card-2bd229f1.js";function P({query:n}){return e.jsx(y,{children:e.jsx(x,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(W,{sx:{textAlign:"center"},children:[e.jsx(j,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(j,{variant:"body2",children:["No results found for Â ",e.jsxs("strong",{children:['"',n,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}P.propTypes={query:a.string};function R({name:n,email:s,city:i,state:l,number:o,status:d,created:u}){const[r,h]=g.useState(null),S=c=>{h(c.currentTarget)},f=()=>{h(null)};return e.jsxs(e.Fragment,{children:[e.jsxs(y,{hover:!0,tabIndex:-1,children:[e.jsx(x,{component:"th",scope:"row",padding:"none",children:e.jsx(v,{direction:"row",alignItems:"center",children:e.jsx(j,{sx:{px:2},noWrap:!0,children:n})})}),e.jsx(x,{children:s}),e.jsx(x,{children:o||"Ikeji"}),e.jsx(x,{children:e.jsx(X,{color:d?"success":"error",children:d?"success":"pending"})}),e.jsx(x,{children:u}),e.jsx(x,{align:"right",children:e.jsx(D,{onClick:S,children:e.jsx(b,{icon:"eva:more-vertical-fill"})})})]}),e.jsxs(H,{open:!!r,anchorEl:r,onClose:f,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:[e.jsxs(T,{onClick:f,children:[e.jsx(b,{icon:"eva:edit-fill",sx:{mr:2}}),"Edit"]}),e.jsxs(T,{onClick:f,sx:{color:"error.main"},children:[e.jsx(b,{icon:"eva:trash-2-outline",sx:{mr:2}}),"Delete"]})]})]})}R.propTypes={name:a.string.isRequired,email:a.any.isRequired,city:a.string.isRequired,state:a.string.isRequired,number:a.string.isRequired,status:a.string.isRequired,created:a.string.isRequired};const ae={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function oe(n,s,i){return n?Math.max(0,(1+n)*s-i):0}function C(n,s,i){return n[i]===null?1:s[i]===null||s[i]<n[i]?-1:s[i]>n[i]?1:0}function ce(n,s){return n==="desc"?(i,l)=>C(i,l,s):(i,l)=>-C(i,l,s)}function le({inputData:n,comparator:s,filterName:i}){const l=n.map((o,d)=>[o,d]);return l.sort((o,d)=>{const u=s(o[0],d[0]);return u!==0?u:o[1]-d[1]}),n=l.map(o=>o[0]),i&&(n=n.filter(o=>o.name.toLowerCase().indexOf(i.toLowerCase())!==-1)),n}function I({order:n,orderBy:s,rowCount:i,headLabel:l,numSelected:o,onRequestSort:d}){const u=r=>h=>{d(h,r)};return e.jsx(_,{children:e.jsx(y,{children:l.map(r=>e.jsx(x,{align:r.align||"left",sortDirection:s===r.id?n:!1,sx:{width:r.width,minWidth:r.minWidth},children:e.jsxs(w,{hideSortIcon:!0,active:s===r.id,direction:s===r.id?n:"asc",onClick:u(r.id),children:[r.label,s===r.id?e.jsx(U,{sx:{...ae},children:n==="desc"?"sorted descending":"sorted ascending"}):null]})},r.id))})})}I.propTypes={order:a.oneOf(["asc","desc"]),orderBy:a.string,rowCount:a.number,headLabel:a.array,numSelected:a.number,onRequestSort:a.func};function q({emptyRows:n,height:s}){return n?e.jsx(y,{sx:{...s&&{height:s*n}},children:e.jsx(x,{colSpan:9})}):null}q.propTypes={emptyRows:a.number,height:a.number};function de(){const[n,s]=g.useState(0),[i,l]=g.useState("asc"),[o,d]=g.useState("name"),[u,r]=g.useState(""),[h,S]=g.useState(10),f=Z(),{data:c,isLoading:A,isError:k}=Q(),{setOpen:E,setModalType:L}=V();if(A)return e.jsx(j,{children:"Loading..."});if(k)return e.jsx(j,{children:"Error loading Can't get state endpoint"});console.log(c);const O=(t,m)=>{l(o===m&&i==="asc"?"desc":"asc"),d(m)},F=(t,m)=>{s(m)},N=t=>{s(0),S(parseInt(t.target.value,10))},M=t=>{s(0),r(t.target.value)},p=le({inputData:c==null?void 0:c.states,comparator:ce(i,o),filterName:u}),z=!(p!=null&&p.length)&&!!u;return e.jsxs(ie,{children:[e.jsx(Y,{}),e.jsxs(v,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[e.jsxs(j,{style:{marginBottom:40},variant:"h4",children:["Safety Circles ",e.jsx("br",{})," ",e.jsx("span",{style:{color:"#292727",fontSize:"16px",fontWeight:400,lineHeight:"19.36px"},children:"Manage sfaety circles created by Yawa users."})]}),e.jsxs(v,{direction:"row",spacing:2,children:[e.jsx(B,{value:u,onChange:M,placeholder:"Search safety circle",InputProps:{startAdornment:e.jsx(G,{position:"start",children:e.jsx(b,{icon:"eva:search-fill"})}),style:{height:"42px",width:"240px"}},variant:"outlined",size:"small"}),e.jsx($,{onClick:()=>{L("create-state"),E(!0)},variant:"contained",style:{background:"#03BDE9",width:"181px",height:"40px",borderRadius:"4px"},color:"inherit",startIcon:e.jsx(b,{icon:"eva:plus-fill"}),children:"Create New State"})]})]}),e.jsxs(re,{children:[e.jsx(J,{children:e.jsx(ee,{sx:{overflow:"unset"},children:e.jsxs(ne,{sx:{minWidth:800},style:{background:"#F2F2F2"},children:[e.jsx(I,{order:i,orderBy:o,rowCount:c==null?void 0:c.total,numSelected:0,onRequestSort:O,headLabel:[{id:"name",label:"Name"},{id:"email",label:"email"},{id:"city",label:"City"},{id:"Admin",label:"Admin"},{id:"Created",label:"Created"},{id:"",label:""}]}),e.jsxs(te,{children:[p==null?void 0:p.slice(n*h,n*h+h).map(t=>{const m=f(t==null?void 0:t.createdAt);return e.jsx(R,{name:t==null?void 0:t.name,email:t==null?void 0:t.email,city:t==null?void 0:t.city,state:t==null?void 0:t.state,number:t==null?void 0:t.phoneNumber,status:t==null?void 0:t.isEmailVerified,created:m},t==null?void 0:t.id)}),e.jsx(q,{height:77,emptyRows:oe(n,h,c==null?void 0:c.total)}),z&&e.jsx(P,{query:u})]})]})})}),e.jsx(se,{page:n,component:"div",count:c==null?void 0:c.total,rowsPerPage:h,onPageChange:F,rowsPerPageOptions:[5,10,25],onRowsPerPageChange:N})]})]})}function je(){return e.jsxs(e.Fragment,{children:[e.jsx(K,{children:e.jsx("title",{children:" User | Yawa Dashboard "})}),e.jsx(de,{})]})}export{je as default};
