import{j as e,U as W,T as g,P as o,r as m,S as v,I as D,w as f,x as H,M as S,z as U,a3 as V,a4 as Y,$ as B,a1 as G,A as Q,y as $,W as J}from"./index-b035a519.js";import{L as K,u as X}from"./label-27495d72.js";import{T as b,a as x,b as Z,c as _,d as w,e as ee,f as ne,g as te}from"./TableSortLabel-295a202c.js";import{C as se}from"./Container-217ed1e2.js";import{C as re}from"./Card-fa1dfd48.js";function C({query:n}){return e.jsx(b,{children:e.jsx(x,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(W,{sx:{textAlign:"center"},children:[e.jsx(g,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(g,{variant:"body2",children:["No results found for Â ",e.jsxs("strong",{children:['"',n,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}C.propTypes={query:o.string};function R({name:n,email:s,city:r,number:c,status:a,created:u}){const[l,i]=m.useState(null),h=y=>{i(y.currentTarget)},j=()=>{i(null)};return e.jsxs(e.Fragment,{children:[e.jsxs(b,{hover:!0,tabIndex:-1,children:[e.jsx(x,{component:"th",scope:"row",padding:"none",children:e.jsx(v,{direction:"row",alignItems:"center",children:e.jsx(g,{sx:{px:2},noWrap:!0,children:n})})}),e.jsx(x,{children:s}),e.jsx(x,{children:c||"Ikeja"}),e.jsx(x,{children:e.jsx(K,{color:a?"success":"error",children:a?"active":"pending"})}),e.jsx(x,{children:u}),e.jsx(x,{align:"right",children:e.jsx(D,{onClick:h,children:e.jsx(f,{icon:"eva:more-vertical-fill"})})})]}),e.jsxs(H,{open:!!l,anchorEl:l,onClose:j,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:[e.jsxs(S,{onClick:j,children:[e.jsx(f,{icon:"eva:edit-fill",sx:{mr:2}}),"Edit"]}),e.jsxs(S,{onClick:j,sx:{color:"error.main"},children:[e.jsx(f,{icon:"eva:trash-2-outline",sx:{mr:2}}),"Delete"]})]})]})}R.propTypes={name:o.string.isRequired,email:o.any.isRequired,city:o.string.isRequired,number:o.string.isRequired,status:o.string.isRequired,created:o.string.isRequired};const ie={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function ae(n,s,r){return n?Math.max(0,(1+n)*s-r):0}function P(n,s,r){return n[r]===null?1:s[r]===null||s[r]<n[r]?-1:s[r]>n[r]?1:0}function oe(n,s){return n==="desc"?(r,c)=>P(r,c,s):(r,c)=>-P(r,c,s)}function ce({inputData:n,comparator:s,filterName:r}){const c=n.map((a,u)=>[a,u]);return c.sort((a,u)=>{const l=s(a[0],u[0]);return l!==0?l:a[1]-u[1]}),n=c.map(a=>a[0]),r&&(n=n.filter(a=>a.name.toLowerCase().indexOf(r.toLowerCase())!==-1)),n}function A({order:n,orderBy:s,rowCount:r,headLabel:c,numSelected:a,onRequestSort:u}){const l=i=>h=>{u(h,i)};return e.jsx(Z,{children:e.jsx(b,{children:c.map(i=>e.jsx(x,{align:i.align||"left",sortDirection:s===i.id?n:!1,sx:{width:i.width,minWidth:i.minWidth},children:e.jsxs(_,{hideSortIcon:!0,active:s===i.id,direction:s===i.id?n:"asc",onClick:l(i.id),children:[i.label,s===i.id?e.jsx(U,{sx:{...ie},children:n==="desc"?"sorted descending":"sorted ascending"}):null]})},i.id))})})}A.propTypes={order:o.oneOf(["asc","desc"]),orderBy:o.string,rowCount:o.number,headLabel:o.array,numSelected:o.number,onRequestSort:o.func};function I({emptyRows:n,height:s}){return n?e.jsx(b,{sx:{...s&&{height:s*n}},children:e.jsx(x,{colSpan:9})}):null}I.propTypes={emptyRows:o.number,height:o.number};function le(){const[n,s]=m.useState(0),[r,c]=m.useState("asc"),[a,u]=m.useState("name"),[l,i]=m.useState(""),[h,j]=m.useState(10),y=X(),{data:d,isLoading:F,isError:k}=V(),{setOpen:q,setModalType:E}=Y();if(F)return e.jsx(g,{children:"Loading..."});if(k)return e.jsx(g,{children:"Error loading categories"});const L=(t,p)=>{c(a===p&&r==="asc"?"desc":"asc"),u(p)},O=(t,p)=>{s(p)},N=t=>{s(0),j(parseInt(t.target.value,10))},M=t=>{s(0),i(t.target.value)},T=ce({inputData:d==null?void 0:d.agencies,comparator:oe(r,a),filterName:l}),z=!T.length&&!!l;return e.jsxs(se,{children:[e.jsxs(v,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[e.jsxs(g,{style:{marginBottom:40},variant:"h4",children:["Agency ",e.jsx("br",{})," ",e.jsx("span",{style:{color:"#292727",fontSize:"16px",fontWeight:400,lineHeight:"19.36px"},children:"Manage Agencies created by Yawa."})]}),e.jsxs(v,{direction:"row",spacing:2,children:[e.jsx(B,{value:l,onChange:M,placeholder:"Search agency",InputProps:{startAdornment:e.jsx(G,{position:"start",children:e.jsx(f,{icon:"eva:search-fill"})}),style:{height:"42px",width:"240px"}},variant:"outlined",size:"small"}),e.jsx(Q,{onClick:()=>{E("create-agencies"),q(!0)},variant:"contained",style:{background:"#03BDE9",width:"201px",height:"40px",borderRadius:"4px"},color:"inherit",startIcon:e.jsx(f,{icon:"eva:plus-fill"}),children:"Create New Agency"})]})]}),e.jsxs(re,{children:[e.jsx($,{children:e.jsx(w,{sx:{overflow:"unset"},children:e.jsxs(ee,{sx:{minWidth:800},style:{background:"#F2F2F2"},children:[e.jsx(A,{order:r,orderBy:a,rowCount:d==null?void 0:d.total,numSelected:0,onRequestSort:L,headLabel:[{id:"name",label:"Name"},{id:"email",label:"email"},{id:"city",label:"City"},{id:"Admin",label:"Admin"},{id:"Created",label:"Created"},{id:"",label:""}]}),e.jsxs(ne,{children:[T.slice(n*h,n*h+h).map(t=>{const p=y(t==null?void 0:t.createdAt);return e.jsx(R,{name:t==null?void 0:t.name,email:t==null?void 0:t.email,city:t==null?void 0:t.city,state:t==null?void 0:t.state,number:t==null?void 0:t.phoneNumber,status:t==null?void 0:t.isEmailVerified,created:p},t==null?void 0:t.id)}),e.jsx(I,{height:77,emptyRows:ae(n,h,d==null?void 0:d.total)}),z&&e.jsx(C,{query:l})]})]})})}),e.jsx(te,{page:n,component:"div",count:d==null?void 0:d.total,rowsPerPage:h,onPageChange:O,rowsPerPageOptions:[5,10,25],onRowsPerPageChange:N})]})]})}function ge(){return e.jsxs(e.Fragment,{children:[e.jsx(J,{children:e.jsx("title",{children:" User | Yawa Dashboard "})}),e.jsx(le,{})]})}export{ge as default};
